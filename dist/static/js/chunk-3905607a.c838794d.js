(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3905607a"],{"9b00":function(e,t,r){},b3a9:function(e,t,r){"use strict";r("9b00")},e496:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"people-index-container"},[r("div",{staticClass:"people-container-right people-pulic_box_shadow"},[r("el-form",{staticClass:"people-demo-form-inline",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"姓名",prop:"search_name"}},[r("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.search_name,callback:function(t){e.search_name=t},expression:"search_name"}})],1),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:function(t){return e.getEmployeesLists()}}},[e._v("查询")]),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){return e.addPeople()}}},[e._v("新增")]),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"medium",icon:"el-icon-folder"},on:{click:function(t){return e.exportData()}}},[e._v("导出")])],1),r("el-table",{staticStyle:{width:"1120px"},attrs:{data:e.list,stripe:"",border:"","row-style":e.iRowStyle,"cell-style":e.iCellStyle,"header-row-style":e.iHeaderRowStyle,"header-cell-style":e.iHeaderCellStyle}},[r("el-table-column",{attrs:{prop:"head_url",width:"120",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"people-img"},[r("el-image",{staticStyle:{width:"30px",height:"30px","border-radius":"100%"},attrs:{src:t.row.head_url,"preview-src-list":e.srcList,fit:"cover"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"real_name",width:"140",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"job_number",width:"200",label:"工号/卡号",align:"center"}}),r("el-table-column",{attrs:{prop:"role_name",width:"160",label:"岗位",align:"center"}}),r("el-table-column",{attrs:{prop:"phone",width:"200",label:"手机号",align:"center"}}),r("el-table-column",{attrs:{prop:"gender",width:"100",label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.gender?r("p",[e._v("男")]):e._e(),"1"==t.row.gender?r("p",[e._v("女")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.handlerEdit(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.handlerDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"people-block",staticStyle:{"margin-top":"0px"}},[r("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.current,"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next","page-sizes":[10,20,30,40]},on:{"current-change":e.getEmployeesLists,"size-change":e.handleSizeChange}})],1)],1),r("el-dialog",{attrs:{title:"新添/修改",visible:e.showDialog,width:"50%",center:"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.showDialog=t}}},[r("el-form",{ref:"formObj",attrs:{model:e.formObj,"label-width":"120px"}},[r("div",{staticClass:"people-flex-space"},[r("el-form-item",{attrs:{label:"姓名*："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.formObj.real_name,callback:function(t){e.$set(e.formObj,"real_name",t)},expression:"formObj.real_name"}})],1),r("el-form-item",{attrs:{label:"工号*："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入工号"},model:{value:e.formObj.job_number,callback:function(t){e.$set(e.formObj,"job_number",t)},expression:"formObj.job_number"}})],1)],1),r("div",{staticClass:"people-flex-space"},[r("el-form-item",{attrs:{label:"手机号*："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号"},model:{value:e.formObj.phone,callback:function(t){e.$set(e.formObj,"phone",t)},expression:"formObj.phone"}})],1),r("el-form-item",{attrs:{label:"岗位*：",prop:"roleId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择岗位"},model:{value:e.formObj.roleId,callback:function(t){e.$set(e.formObj,"roleId",t)},expression:"formObj.roleId"}},e._l(e.listRole,(function(e,t){return r("el-option",{key:t,attrs:{label:e.role_name,value:e.id+""}})})),1)],1)],1),r("el-form-item",{attrs:{label:"性别*：",prop:"gender"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别"},model:{value:e.formObj.gender,callback:function(t){e.$set(e.formObj,"gender",t)},expression:"formObj.gender"}},[r("el-option",{attrs:{label:"男",value:"0"}}),r("el-option",{attrs:{label:"女",value:"1"}})],1)],1),r("el-form-item",{attrs:{label:"上传头像*："}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://monitor.coyotebio-lab.com:8443/wisdomLivestockWH/PCpersonnelManagement/upload.hn","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.formObj.fileUrl?r("el-image",{staticClass:"people-avatar",attrs:{src:e.formObj.fileUrl,fit:"contain"}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),r("div",{staticClass:"people-from-footer"},[r("el-button",{on:{click:function(t){return e.resetForm("formObj")}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("formObj")}}},[e._v("保存")])],1)],1)],1),r("el-dialog",{attrs:{visible:e.deleteDialog,width:"30%",center:""},on:{"update:visible":function(t){e.deleteDialog=t}}},[r("span",[e._v("确定要删除该员工吗？")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteDialog=!1}}},[e._v("取 消")]),r("el-button",{on:{click:function(t){return e.deleteSubmitClick()}}},[e._v("确 定")])],1)])],1)},a=[],o=(r("159b"),r("c1df")),i=r.n(o),l=r("fd03"),n=r("5c96"),c=r("4328"),d={data:function(){return{userInfo:JSON.parse(window.localStorage.getItem("userInfo")),search_name:"",current:1,limit:10,total:0,list:[],listRole:[],srcList:[],showDialog:!1,formObj:{real_name:"",job_number:"",phone:"",roleId:"",gender:"",fileUrl:""},rules:{real_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],job_number:[{required:!0,message:"请输入工号",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"长度在11个字符",trigger:"blur"}],roleId:[{required:!0,message:"请选择岗位",trigger:"change"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],fileUrl:[{required:!0,message:"请上传头像",trigger:"blur"}]},deleteDialog:!1,id:"",userstatus:"",isEdit:1}},created:function(){},mounted:function(){this.getEmployeesLists(),this.getRoleinfo()},methods:{iRowStyle:function(e){e.row,e.rowIndex;return"height:35px"},iHeaderRowStyle:function(e){e.row,e.rowIndex;return"height:46px"},iCellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"padding:0px"},iHeaderCellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"padding:0px"},dateFormat:function(e,t){var r=e[t.property];return void 0==r?"":i()(r).format("YYYY-MM-DD HH:mm:ss")},isEmpty:function(e){return null==e||void 0==e||""==e},getEmployeesLists:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.current=t,Object(l["J"])({pig_farm_id:this.userInfo.farm_id,page:this.current,limit:this.limit,real_name:this.search_name}).then((function(t){t.data.success?(e.list=t.data.info,e.total=parseInt(t.data.count),e.list.forEach((function(t){e.srcList.push(t.head_url)}))):Object(n["Message"])({type:"warning",message:t.data.msg,showClose:!0,duration:3e3})}))},handleSizeChange:function(e){this.limit=e,this.getEmployeesLists()},handleAvatarSuccess:function(e){e.success&&(this.formObj.fileUrl=e.msg)},beforeAvatarUpload:function(){this.formObj.fileUrl=""},handlerDelete:function(e){this.deleteDialog=!0,this.id=e},deleteSubmitClick:function(){var e=this;this.id&&Object(l["j"])({id:this.id}).then((function(t){t.data.success?(Object(n["Message"])({type:"success",message:t.data.msg,showClose:!0,duration:3e3}),e.getEmployeesLists(),e.deleteDialog=!1):Object(n["Message"])({type:"warning",message:t.data.msg,showClose:!0,duration:3e3})}))},handlerEdit:function(e){var t=this;this.isEdit=2,this.showDialog=!0,Object(l["tb"])({id:e}).then((function(e){if(e.data.success){var r=e.data.data;if(r&&r.length>0){var s=r[0];t.formObj.real_name=s.real_name,t.formObj.job_number=s.job_number,t.formObj.phone=s.phone,t.formObj.roleId=s.roleId,t.formObj.gender=s.gender,t.formObj.fileUrl=s.head_url,t.userstatus=s.status,t.id=s.id}}else Object(n["Message"])({type:"warning",message:e.data.msg,showClose:!0,duration:3e3})}))},getRoleinfo:function(){var e=this;Object(l["kb"])({pig_farm_id:this.userInfo.farm_id}).then((function(t){t.data.success?e.listRole=t.data.data:Object(n["Message"])({type:"warning",message:t.data.msg,showClose:!0,duration:3e3})}))},resetForm:function(e){this.$refs[e].resetFields(),this.showDialog=!1,this.formObj.real_name="",this.formObj.job_number="",this.formObj.phone="",this.formObj.roleId="",this.formObj.gender="",this.formObj.fileUrl="",this.id="",this.userstatus=""},onSubmit:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;if(2==t.isEdit){var s=t.formObj;s.id=t.id,s.status=t.userstatus,Object(l["v"])(s).then((function(r){r.data.success?(Object(n["Message"])({type:"success",message:r.data.msg,showClose:!0,duration:3e3}),t.getEmployeesLists(),t.$refs[e].resetFields(),t.showDialog=!1,t.formObj.real_name="",t.formObj.job_number="",t.formObj.phone="",t.formObj.roleId="",t.formObj.gender="",t.formObj.fileUrl="",t.id="",t.userstatus=""):Object(n["Message"])({type:"warning",message:r.data.msg,showClose:!0,duration:3e3})}))}else{var a=t.formObj;a.pig_farm_id=t.userInfo.farm_id,Object(l["h"])(a).then((function(r){r.data.success?(Object(n["Message"])({type:"success",message:r.data.msg,showClose:!0,duration:3e3}),t.getEmployeesLists(),t.$refs[e].resetFields(),t.showDialog=!1,t.formObj.real_name="",t.formObj.job_number="",t.formObj.phone="",t.formObj.roleId="",t.formObj.gender="",t.formObj.fileUrl="",t.id="",t.userstatus=""):Object(n["Message"])({type:"warning",message:r.data.msg,showClose:!0,duration:3e3})}))}}))},addPeople:function(){this.isEdit=1,this.showDialog=!0},exportData:function(){var e={pig_farm_id:this.userInfo.farm_id,real_name:this.search_name};window.open("https://monitor.coyotebio-lab.com:8443/wisdomLivestockWH/PCpersonnelManagement/ExportEmployeesLists.hn?".concat(Object(c["stringify"])(e))),this.formObj.real_name="",this.formObj.job_number="",this.formObj.phone="",this.formObj.roleId="",this.formObj.gender="",this.formObj.fileUrl="",this.id="",this.userstatus=""}}},m=d,u=(r("b3a9"),r("0c7c")),f=Object(u["a"])(m,s,a,!1,null,null,null);t["default"]=f.exports}}]);